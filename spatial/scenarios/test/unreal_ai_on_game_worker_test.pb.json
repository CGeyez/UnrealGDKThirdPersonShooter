{
    "identifier": {
        "name": "ai_on_game_worker"
    },
    "projectId": {
        "name": "unreal_gdk"
    },
    "assembly": {
        "name": "set --override_assembly_name"
    },
    "tags": [
    {
        "name": "ai_perf"
    },
    {
        "name": "ai_on_game_worker"
    }],
    "comment": "Baseline scenario with a single game logic worker",
    "metrics": [
    {
        "prometheusExpressionTemplate": "max(improbable_logging_logged_errors::sum{app='%project%',dpl='%deployment%',node_cat=''} or vector(0))",
        "name": "error_log_count"
    },
    {
        "prometheusExpressionTemplate": "rate(improbable_db_loadtest_client_operations_sent{dpl=\"%deployment%\"}[30s])",
        "name": "ops_sent_per_s"
    },
    {
        "prometheusExpressionTemplate": "rate(improbable_db_loadtest_client_updates_received{dpl=\"%deployment%\"}[30s])",
        "name": "updates_received_per_s"
    },
    {
        "prometheusExpressionTemplate": "rate(improbable_db_loadtest_update_latency_ns_bucket{dpl=\"%deployment%\"}[30s])",
        "name": "update_latency_histogram_ns"
    },
    {
        "prometheusExpressionTemplate": "sum(rate(node_cpu{dpl=\"%deployment%\",mode=\"user\"}[30s])) by (node)",
        "name": "cpu"
    },
    {
        "prometheusExpressionTemplate": "node_memory_MemUsed{dpl=\"%deployment%\"}",
        "name": "ram"
    },
    {
        "prometheusExpressionTemplate": "rate(node_network_receive_bytes{dpl=\"%deployment%\",device=\"ens4v1\"}[30s])",
        "name": "network_rx"
    },
    {
        "prometheusExpressionTemplate": "rate(node_network_transmit_bytes{dpl=\"%deployment%\",device=\"ens4v1\"}[30s])",
        "name": "network_tx"
    },
    {
        "prometheusExpressionTemplate": "sum(rate(jvm_gc_collection_seconds_sum{dpl=\"%deployment%\"}[30s])) by (node)",
        "name": "gc"
    },
    {
        "prometheusExpressionTemplate": "spatialos_node_cpu_used:ratio{project='%project%',dpl='%deployment%',node='worker_nanny'} or vector(0)",
        "name": "node_cpu_used_detail"
    },
    {
        "prometheusExpressionTemplate": "spatialos_node_memory_used:ratio{project=%project%,dpl='%deployment%',node='worker_nanny'} or vector(0)",
        "name": "node_memory_used_detail"
    },
    {
        "prometheusExpressionTemplate": "spatialos_worker_update_size_bytes::rate1m{project='%project%',dpl='%deployment%',worker_type='UnrealWorker', direction='from_worker'} or vector(0)",
        "name": "from_unreal_worker_update_size_rate1m"
    }],
    "initialState": {
        "taggedSnapshot": {
            "historyName": "ai_perf_base_history",
            "snapshotTag": "default_snapshot"
        }
    },
    "lifetime": {
        "seconds": "600"
    },
    "launchConfiguration": {
        "template": "small",
        "world": {
            "chunkEdgeLengthMeters": "50",
            "legacyFlags": [
            {
              "name": "bridge_soft_handover_enabled",
              "value": "false"
            },
            {
                "name": "enable_chunk_interest",
                "value": "true"
            },
            {
                "name": "streaming_query_diff",
                "value": "true"
            },
            {
                "name": "load_snapshot_at_startup",
                "value": "true"
            }],
            "dimensions": {
                "xMeters": "2000",
                "zMeters": "2000"
            }
        },
        "workers": [
        {
            "workerType": "UnrealWorker",
            "flags": [],
            "loadBalancing": {
              "autoHexGrid": {
                "numWorkers": 1
              }
            },
            "permissions": [
            {
                "all": {}
            }]
        },
        {
            "workerType": "UnrealClient",
            "flags": [],
            "permissions": [
            {
                "all": {}
            }]
        }]
    }
}